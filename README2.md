# ハリーポッター　呪文データベース
映画内で使用されたものに限定

# DBのスキーマ

## characterテーブル

| id | 学生名 | 寮 |
| ---- | ---- | ---- |
| 1 | ハリーポッター | グリフィンドール | 
| 2 | ロンウィーズリー | グリフィンドール |
| 3 | ハーマイオニーグレンジャー | グリフィンドール | 
| 5 | ドラコマルフォイ | スリザリン |
| 6 | セドリックディゴリー | ハッフルパフ |
| 7 | ルーナラブグット | レイブンクロー | 


## magicテーブル

| id | 呪文名 | 意味 |
| --- | ---- | ---- |
| 1 | ウィンガーディアム・レヴィオーサ|　浮遊せよ |
| 2 | ペトリフィカス・トタルス　|　石になれ　|
| 3 | リクタスセンプラ　|　宙を舞え　|
| 4 | アラーニア・エグズメイ　|　武器よ去れ　|
| 5 | エクスペクト・パトローナム|　守護霊よ来たれ　|
| 6 | ルーモス | 光よ |
| 7 | アクシオ | 来い |
| 8 | ステューピファイ | 麻痺せよ　|
| 9 | プロテゴ　|　護れ　|
| 10 | レパロ　|　直れ　|
| 12 | オブリビエイト　|　忘れよ　|
| 13 | レダクト　|　粉々　|
| 14 | エクスぺりアムス　|　武器よ去れ　|
| 15 | インペリオ　|　服従せよ　|


## relテーブル

| character_id | magic_id | series_id |
| ---- | ---- | ---- |
| 1 | 1 | 1 |
| 2 | 1 | 2 |
| 3 | 1 | 14 |
| 4 | 1 | 4 |
| 5 | 1 | 3 |
| 8 | 1 | 5 |
| 9 | 1 | 7 |
| 10 | 1 | 6 |
| 11 | 1 | 8 |
| 12 | 1 | 9 |
| 13 | 1 | 10 |
| 14 | 1 | 13 |
| 15 | 1 | 15 |
| 16 | 2 | 1 |
| 17 | 2 | 6 |
| 18 | 2 | 7 |
| 19 | 2 | 8 |
| 20 | 2 | 13 |
| 21 | 2 | 14 |
| 22 | 3 | 1 |
| 23 | 3 | 2 |
| 24 | 3 | 6 |
| 25 | 3 | 7 |
| 26 | 3 | 8 |
| 27 | 3 | 9 |
| 28 | 3 | 10 |
| 29 | 3 | 12 |
| 30 | 3 | 13 |
| 31 | 3 | 14 |
| 32 | 5 | 14 |
| 33 | 5 | 15 |
| 34 | 6 | 2 |
| 35 | 7 | 13 |

# ファイル一覧

| ファイル名/ディレクトリ名 | 役割 |
| ---- | ---- |
| app6.js | キャラクター名、魔法名をページから取得する |
| public | 静的なページを取得する |
| views | テンプレートファイル |
| magic.ejs | 魔法一覧表示 |
| magic2.ejs | 魔法一覧表示(降順) |
| show.ejs | トップページ表示 |
| test3.ejs | キャラクター一覧表示 |
|create.js | テーブルを登録するサンプル|
|delete.js | テーブルからデータを削除するサンプル|
|insert.js | テーブルにデータを追加するサンプル|
|schema.js | テーブル情報を表示するサンプル|
|select_db.js | cmテーブルからデータを取得するサンプル|
|select_magic.js | magicテーブルからデータを取得するサンプル|
|select_magicnum.js | magicnumテーブルからデータを取得するサンプル|
|tables.js | テーブル名を表示するサンプル|
|test3.db | app6.jsで使用するデータベース|

# URLと概要の対応表

| URL | 概要 |
| ---- | ---- |
| "/" | トップページ。GETリクエストを受け取り、ハリーポッターデータベースへアクセスが出来る。|
| "/public/Harry Potter" | キャラクターの顔写真、名前、寮名の情報が閲覧出来る。使用魔法一覧へアクセス出来る。|
| "/magicH" | character.idの値を使用して、"cm", "character", "magic"のテーブルからデータを取得する。"test3"テンプレートにデータを渡す。
ハリーポッターが使用した魔法一覧が閲覧出来る。|
| "/magicR" | character.idの値を使用して、"cm", "character", "magic"のテーブルからデータを取得する。"test3"テンプレートにデータを渡す。
ロンウィーズリーが使用した魔法一覧が閲覧出来る。|
| "/magicHer" | character.idの値を使用して、"cm", "character", "magic"のテーブルからデータを取得する。"test3"テンプレートにデータを渡す。
ハーマイオニーグレンジャーが使用した魔法一覧が閲覧出来る。|
| "/magicM" | character.idの値を使用して、"cm", "character", "magic"のテーブルからデータを取得する。"test3"テンプレートにデータを渡す。
ドラコマルフォイが使用した魔法一覧が閲覧出来る。|
| "/magicS" | character.idの値を使用して、"cm", "character", "magic"のテーブルからデータを取得する。"test3"テンプレートにデータを渡す。
セドリックディゴリーが使用した魔法一覧が閲覧出来る。|
| "/magicL" | character.idの値を使用して、"cm", "character", "magic"のテーブルからデータを取得する。"test3"テンプレートにデータを渡す。
ルーナラブグットが使用した魔法一覧が閲覧出来る。|
| "/magicnum" | "magic"と"magicnum"テーブルを結合し、名前、意味、使用回数を取得する。
作中に登場した魔法を閲覧出来る。|
| "/magicnum2" | magicnumと同様の動作を行う。
作中に登場した魔法を降順に表示する。 |

